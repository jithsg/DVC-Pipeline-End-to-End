schema: '2.0'
stages:
  load:
    cmd: python src/load.py --config=params.yaml
    deps:
    - path: data/iris.csv
      hash: md5
      md5: 717820ef0af287ff346c5cabfb4c612c
      size: 5107
    - path: src/load.py
      hash: md5
      md5: 562ef32640fd9d55ff8d2d70d8418b04
      size: 1085
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.3
          random_state: 42
    outs:
    - path: data/processed.csv
      hash: md5
      md5: 83984691ad8d356545f66340d76bc030
      size: 2757
  feat:
    cmd: python src/feat.py --config=params.yaml
    deps:
    - path: data/processed.csv
      hash: md5
      md5: 83984691ad8d356545f66340d76bc030
      size: 2757
    - path: src/feat.py
      hash: md5
      md5: d423ea0d37f3b92f0d7c681ffc8fec87
      size: 1038
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.3
          random_state: 42
    outs:
    - path: data/features.csv
      hash: md5
      md5: 8ee1a56f66a60bdf9e6cfe689cf9c3d6
      size: 7247
  split:
    cmd: python src/split.py --config=params.yaml
    deps:
    - path: data/features.csv
      hash: md5
      md5: 8ee1a56f66a60bdf9e6cfe689cf9c3d6
      size: 7247
    - path: src/split.py
      hash: md5
      md5: 031f4eb46b5c0fec29eb66a7934a5410
      size: 1007
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.3
          random_state: 42
    outs:
    - path: data/test_iris.csv
      hash: md5
      md5: a4062ba6421285181f76cad57ab08d43
      size: 2140
    - path: data/train_iris.csv
      hash: md5
      md5: 98f6a1e51aaa095a515adf09a6193bca
      size: 5063
  train:
    cmd: python src/train.py --config=params.yaml
    deps:
    - path: data/train_iris.csv
      hash: md5
      md5: 98f6a1e51aaa095a515adf09a6193bca
      size: 5063
    - path: src/train.py
      hash: md5
      md5: 29bfab53b7eb8c6cc2eb0dca4c32697b
      size: 1317
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.3
          random_state: 42
        training:
          clf_params:
            C: 0.004
            solver: lbfgs
            multi_class: multinomial
            max_iter: 150
          model_path: model/model.pkl
    outs:
    - path: model/model.pkl
      hash: md5
      md5: 420f5ddbae3066e53be5e68e82ad83ef
      size: 991
  eval:
    cmd: python src/eval.py --config=params.yaml
    deps:
    - path: data/test_iris.csv
      hash: md5
      md5: a4062ba6421285181f76cad57ab08d43
      size: 2140
    - path: model/model.pkl
      hash: md5
      md5: 420f5ddbae3066e53be5e68e82ad83ef
      size: 991
    - path: src/eval.py
      hash: md5
      md5: e93f7052fb137160f6aa264499f0f461
      size: 1527
    params:
      params.yaml:
        base:
          random_state: 42
        data:
          dataset_csv: data/iris.csv
          processed_path: data/processed.csv
          features_path: data/features.csv
          trainset_path: data/train_iris.csv
          testset_path: data/test_iris.csv
          test_size: 0.3
          random_state: 42
        reports:
          metrics_file: eval/metrics.json
          confusion_matrix_file: eval/confusion_matrix.png
    outs:
    - path: eval/confusion_matrix.png
      hash: md5
      md5: 613cde6bca415f587db82e3179d8aec2
      size: 15865
    - path: eval/metrics.json
      hash: md5
      md5: bd390ccca7824c14d682daf9d61ec98b
      size: 32
